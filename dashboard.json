{
  "schemaVersion" : 7,
  "id" : null,
  "version" : 0,
  "title" : "my-kafka-cluster",
  "originalTitle" : "my-kafka-cluster",
  "style" : "dark",
  "timezone" : "browser",
  "refresh" : "10s",
  "time" : {
    "from" : "now-30m",
    "to" : "now"
  },
  "editable" : true,
  "hideControls" : false,
  "sharedCrosshair" : false,
  "links" : [ ],
  "tags" : [ ],
  "templating" : {
    "list" : [ {
      "type" : "custom",
      "name" : "topic",
      "label" : "topic",
      "includeAll" : true,
      "multi" : false,
      "query" : "",
      "datasource" : null,
      "refresh" : 0,
      "hide" : 0,
      "current" : {
        "text" : "All",
        "value" : "$__all",
        "tags" : [ ]
      },
      "options" : [ {
        "text" : "All",
        "value" : "$__all",
        "selected" : true
      } ],
      "allValue" : ".+"
    } ]
  },
  "annotations" : {
    "list" : [ ]
  },
  "rows" : [ {
    "title" : "TOPIC METRICS FOR `$topic`",
    "showTitle" : true,
    "height" : "250px",
    "editable" : true,
    "collapse" : false,
    "panels" : [ {
      "title" : "Max Lag",
      "span" : 1,
      "id" : 4,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "singlestat",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT sum(\"Value\") FROM \"MaxLag\" WHERE $timeFilter GROUP BY time(25s)",
        "alias" : "",
        "rawQuery" : true
      } ],
      "valueName" : "current",
      "decimals" : 0,
      "maxDataPoints" : 100,
      "prefix" : "",
      "postfix" : "",
      "nullText" : null,
      "prefixFontSize" : "50%",
      "valueFontSize" : "150%",
      "postfixFontSize" : "50%",
      "format" : "none",
      "nullPointMode" : "connected",
      "sparkline" : {
        "show" : false,
        "full" : false
      }
    }, {
      "title" : "Network IO Rate",
      "span" : 2,
      "id" : 2,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "graph",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT mean(\"Value\") FROM \"network-io-rate\" WHERE $timeFilter GROUP BY time(25s), \"topic\" fill(null)",
        "alias" : "$tag_topic",
        "rawQuery" : true
      } ],
      "nullPointMode" : "connected",
      "x-axis" : true,
      "y-axis" : true,
      "y_formats" : [ "short", "short" ],
      "lines" : true,
      "linewidth" : 2,
      "steppedLine" : false,
      "fill" : 4,
      "points" : false,
      "pointradius" : 2,
      "bars" : false,
      "percentage" : false,
      "stack" : false,
      "tooltip" : {
        "value_type" : "individual",
        "shared" : false
      },
      "seriesOverrides" : [ ],
      "aliasColors" : { },
      "legend" : {
        "show" : false,
        "values" : false,
        "min" : false,
        "max" : false,
        "current" : false,
        "total" : false,
        "avg" : false
      },
      "grid" : {
        "leftLogBase" : 1,
        "leftMax" : null,
        "rightMax" : null,
        "leftMin" : null,
        "rightMin" : null,
        "rightLogBase" : 1,
        "threshold1" : null,
        "threshold1Color" : "rgba(216, 200, 27, 0.27)",
        "threshold2" : null,
        "threshold2Color" : "rgba(234, 112, 112, 0.22)"
      }
    }, {
      "title" : "Unclean Leader Election / Sec",
      "span" : 5,
      "id" : 3,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "graph",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT \"MeanRate\" FROM \"UncleanLeaderElectionsPerSec\" WHERE $timeFilter GROUP BY \"topic\" fill(null)",
        "alias" : "$tag_topic",
        "rawQuery" : true
      } ],
      "nullPointMode" : "connected",
      "x-axis" : true,
      "y-axis" : true,
      "y_formats" : [ "bytes", "short" ],
      "lines" : true,
      "linewidth" : 2,
      "steppedLine" : false,
      "fill" : 2,
      "points" : false,
      "pointradius" : 2,
      "bars" : false,
      "percentage" : false,
      "stack" : false,
      "tooltip" : {
        "value_type" : "individual",
        "shared" : false
      },
      "seriesOverrides" : [ ],
      "aliasColors" : { },
      "legend" : {
        "show" : false,
        "values" : false,
        "min" : false,
        "max" : false,
        "current" : false,
        "total" : false,
        "avg" : false
      },
      "grid" : {
        "leftLogBase" : 1,
        "leftMax" : null,
        "rightMax" : null,
        "leftMin" : null,
        "rightMin" : null,
        "rightLogBase" : 1,
        "threshold1" : null,
        "threshold1Color" : "rgba(216, 200, 27, 0.27)",
        "threshold2" : null,
        "threshold2Color" : "rgba(234, 112, 112, 0.22)"
      }
    }, { 
      "title" : "Unclean Leader Election / Sec",
      "span" : 5,
      "id" : 3,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "graph",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT \"MeanRate\" FROM \"UncleanLeaderElectionsPerSec\" WHERE $timeFilter GROUP BY \"topic\" fill(null)",
        "alias" : "$tag_topic",
        "rawQuery" : true
      } ],
      "nullPointMode" : "connected",
      "x-axis" : true,
      "y-axis" : true,
      "y_formats" : [ "bytes", "short" ],
      "lines" : true,
      "linewidth" : 2,
      "steppedLine" : false,
      "fill" : 2,
      "points" : false,
      "pointradius" : 2,
      "bars" : false,
      "percentage" : false,
      "stack" : false,
      "tooltip" : {
        "value_type" : "individual",
        "shared" : false
      },
      "seriesOverrides" : [ ],
      "aliasColors" : { },
      "legend" : {
        "show" : false,
        "values" : false,
        "min" : false,
        "max" : false,
        "current" : false,
        "total" : false,
        "avg" : false
      },
      "grid" : {
        "leftLogBase" : 1,
        "leftMax" : null,
        "rightMax" : null,
        "leftMin" : null,
        "rightMin" : null,
        "rightLogBase" : 1,
        "threshold1" : null,
        "threshold1Color" : "rgba(216, 200, 27, 0.27)",
        "threshold2" : null,
        "threshold2Color" : "rgba(234, 112, 112, 0.22)"
      }
    }
    ]

  }, {
    "title" : "CLUSTER METRICS FOR 1 broker(s)",
    "showTitle" : true,
    "height" : "172px",
    "editable" : true,
    "collapse" : false,
    "panels" : [ {
      "title" : "Controllers",
      "span" : 1,
      "id" : 4,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "singlestat",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT sum(\"Value\") FROM \"ActiveControllerCount\" WHERE \"group\" = 'kafka.controller' AND $timeFilter GROUP BY time(25s)",
        "alias" : "",
        "rawQuery" : true
      } ],
      "valueName" : "current",
      "decimals" : 0,
      "maxDataPoints" : 100,
      "prefix" : "",
      "postfix" : "",
      "nullText" : null,
      "prefixFontSize" : "50%",
      "valueFontSize" : "150%",
      "postfixFontSize" : "50%",
      "format" : "none",
      "nullPointMode" : "connected",
      "sparkline" : {
        "show" : false,
        "full" : false
      }
    }, {
      "title" : "Under-Replicated Partitions",
      "span" : 2,
      "id" : 5,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "graph",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT mean(\"Value\") FROM \"UnderReplicatedPartitions\" WHERE \"group\" = 'kafka.server' AND $timeFilter GROUP BY time(25s), \"service\"",
        "alias" : "$tag_service",
        "rawQuery" : true
      } ],
      "nullPointMode" : "connected",
      "x-axis" : true,
      "y-axis" : true,
      "y_formats" : [ "short", "short" ],
      "lines" : true,
      "linewidth" : 2,
      "steppedLine" : false,
      "fill" : 1,
      "points" : false,
      "pointradius" : 2,
      "bars" : true,
      "percentage" : false,
      "stack" : false,
      "tooltip" : {
        "value_type" : "cumulative",
        "shared" : true
      },
      "seriesOverrides" : [ ],
      "aliasColors" : { },
      "legend" : {
        "show" : false,
        "values" : false,
        "min" : false,
        "max" : false,
        "current" : false,
        "total" : false,
        "avg" : false
      },
      "grid" : {
        "leftLogBase" : 1,
        "leftMax" : null,
        "rightMax" : null,
        "leftMin" : null,
        "rightMin" : null,
        "rightLogBase" : 1,
        "threshold1" : null,
        "threshold1Color" : "rgba(216, 200, 27, 0.27)",
        "threshold2" : null,
        "threshold2Color" : "rgba(234, 112, 112, 0.22)"
      }
    }, {
      "title" : "Partition Count",
      "span" : 2,
      "id" : 6,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "table",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT last(\"Value\") FROM \"PartitionCount\" WHERE \"group\" = 'kafka.server' AND $timeFilter GROUP BY time(25s), \"service\"",
        "alias" : "$tag_service",
        "rawQuery" : true
      } ],
      "transform" : "timeseries_aggregations",
      "columns" : [ {
        "value" : "avg",
        "text" : "avg"
      } ],
      "styles" : [ {
        "value" : "avg",
        "type" : "number",
        "pattern" : "/.*/",
        "decimals" : 0,
        "unit" : "short"
      } ],
      "showHeader" : false,
      "scroll" : true,
      "fontSize" : "100%",
      "pageSize" : null,
      "sort" : {
        "col" : null,
        "desc" : false
      }
    }, {
      "title" : "Log Flush Time (98th maximum)",
      "span" : 2,
      "id" : 7,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "graph",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT max(\"98thPercentile\") as \"98thPercentile\" FROM \"LogFlushRateAndTimeMs\" WHERE \"group\" = 'kafka.log' AND $timeFilter GROUP BY time(1m), \"service\"",
        "alias" : "$tag_service",
        "rawQuery" : true
      } ],
      "nullPointMode" : "connected",
      "x-axis" : true,
      "y-axis" : true,
      "y_formats" : [ "ms", "short" ],
      "lines" : true,
      "linewidth" : 1,
      "steppedLine" : false,
      "fill" : 0,
      "points" : false,
      "pointradius" : 2,
      "bars" : false,
      "percentage" : false,
      "stack" : false,
      "tooltip" : {
        "value_type" : "cumulative",
        "shared" : true
      },
      "seriesOverrides" : [ ],
      "aliasColors" : { },
      "legend" : {
        "show" : false,
        "values" : false,
        "min" : false,
        "max" : false,
        "current" : false,
        "total" : false,
        "avg" : false
      },
      "grid" : {
        "leftLogBase" : 1,
        "leftMax" : null,
        "rightMax" : null,
        "leftMin" : null,
        "rightMin" : null,
        "rightLogBase" : 1,
        "threshold1" : 6,
        "threshold1Color" : "rgba(236, 118, 21, 0.21)",
        "threshold2" : 12,
        "threshold2Color" : "rgba(234, 112, 112, 0.22)"
      }
    }, {
      "title" : "Input / Sec",
      "span" : 2,
      "id" : 8,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "graph",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT sum(\"OneMinuteRate\") FROM \"BytesInPerSec\" WHERE \"group\" = 'kafka.server' AND \"topic\" =~ /^$topic$/ AND $timeFilter GROUP BY time(25s), \"service\"",
        "alias" : "$tag_service",
        "rawQuery" : true
      } ],
      "nullPointMode" : "connected",
      "x-axis" : true,
      "y-axis" : true,
      "y_formats" : [ "bytes", "short" ],
      "lines" : true,
      "linewidth" : 2,
      "steppedLine" : false,
      "fill" : 2,
      "points" : false,
      "pointradius" : 2,
      "bars" : false,
      "percentage" : false,
      "stack" : true,
      "tooltip" : {
        "value_type" : "individual",
        "shared" : true
      },
      "seriesOverrides" : [ ],
      "aliasColors" : { },
      "legend" : {
        "show" : false,
        "values" : false,
        "min" : false,
        "max" : false,
        "current" : false,
        "total" : false,
        "avg" : false
      },
      "grid" : {
        "leftLogBase" : 1,
        "leftMax" : null,
        "rightMax" : null,
        "leftMin" : 0,
        "rightMin" : null,
        "rightLogBase" : 1,
        "threshold1" : null,
        "threshold1Color" : "rgba(216, 200, 27, 0.27)",
        "threshold2" : null,
        "threshold2Color" : "rgba(234, 112, 112, 0.22)"
      }
    }, {
      "title" : "Output / Sec",
      "span" : 2,
      "id" : 9,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "graph",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT sum(\"OneMinuteRate\") FROM \"BytesOutPerSec\" WHERE \"group\" = 'kafka.server' AND \"topic\" =~ /^$topic$/ AND $timeFilter GROUP BY time(25s), \"service\"",
        "alias" : "$tag_service",
        "rawQuery" : true
      } ],
      "nullPointMode" : "connected",
      "x-axis" : true,
      "y-axis" : true,
      "y_formats" : [ "bytes", "short" ],
      "lines" : true,
      "linewidth" : 2,
      "steppedLine" : false,
      "fill" : 2,
      "points" : false,
      "pointradius" : 2,
      "bars" : false,
      "percentage" : false,
      "stack" : true,
      "tooltip" : {
        "value_type" : "individual",
        "shared" : true
      },
      "seriesOverrides" : [ ],
      "aliasColors" : { },
      "legend" : {
        "show" : false,
        "values" : false,
        "min" : false,
        "max" : false,
        "current" : false,
        "total" : false,
        "avg" : false
      },
      "grid" : {
        "leftLogBase" : 1,
        "leftMax" : null,
        "rightMax" : null,
        "leftMin" : 0,
        "rightMin" : null,
        "rightLogBase" : 1,
        "threshold1" : null,
        "threshold1Color" : "rgba(216, 200, 27, 0.27)",
        "threshold2" : null,
        "threshold2Color" : "rgba(234, 112, 112, 0.22)"
      }
    }, {
      "title" : "Requests/Sec",
      "span" : 1,
      "id" : 10,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "singlestat",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT mean(\"OneMinuteRate\") FROM \"RequestsPerSec\" WHERE \"group\" = 'kafka.network' AND $timeFilter GROUP BY time(25s)",
        "alias" : "",
        "rawQuery" : true
      } ],
      "valueName" : "avg",
      "decimals" : 1,
      "maxDataPoints" : 100,
      "prefix" : "",
      "postfix" : "",
      "nullText" : null,
      "prefixFontSize" : "50%",
      "valueFontSize" : "35%",
      "postfixFontSize" : "50%",
      "format" : "short",
      "nullPointMode" : "connected",
      "sparkline" : {
        "show" : true,
        "full" : false
      }
    } ]
  }, {
    "title" : "Kafka Broker ID 0 @ localhost:9092",
    "showTitle" : true,
    "height" : "250px",
    "editable" : true,
    "collapse" : true,
    "panels" : [ {
      "title" : "Num.delayed requests",
      "span" : 4,
      "id" : 11,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "graph",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT max(\"Value\"), median(\"Value\"), min(\"Value\") FROM \"NumDelayedRequests\" WHERE \"service\" = 'broker-1' AND $timeFilter GROUP BY time($interval) fill(null)",
        "alias" : "$col",
        "rawQuery" : true
      } ],
      "nullPointMode" : "connected",
      "x-axis" : true,
      "y-axis" : true,
      "y_formats" : [ "short", "short" ],
      "lines" : true,
      "linewidth" : 2,
      "steppedLine" : false,
      "fill" : 1,
      "points" : false,
      "pointradius" : 2,
      "bars" : false,
      "percentage" : false,
      "stack" : false,
      "tooltip" : {
        "value_type" : "cumulative",
        "shared" : true
      },
      "seriesOverrides" : [ ],
      "aliasColors" : { },
      "legend" : {
        "show" : true,
        "values" : false,
        "min" : false,
        "max" : false,
        "current" : false,
        "total" : false,
        "avg" : false
      },
      "grid" : {
        "leftLogBase" : 1,
        "leftMax" : null,
        "rightMax" : null,
        "leftMin" : null,
        "rightMin" : null,
        "rightLogBase" : 1,
        "threshold1" : null,
        "threshold1Color" : "rgba(216, 200, 27, 0.27)",
        "threshold2" : null,
        "threshold2Color" : "rgba(234, 112, 112, 0.22)"
      }
    }, {
      "title" : "Log Flush Time (mean)",
      "span" : 4,
      "id" : 12,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "graph",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT sum(\"999thPercentile\") as \"999thPercentile\" FROM \"LogFlushRateAndTimeMs\" WHERE \"group\" = 'kafka.log' AND \"service\" = 'broker-0'AND $timeFilter GROUP BY time(30s)",
        "alias" : "$col",
        "rawQuery" : true
      }, {
        "refId" : "B",
        "query" : "SELECT sum(\"99thPercentile\") as \"99thPercentile\" FROM \"LogFlushRateAndTimeMs\" WHERE \"group\" = 'kafka.log' AND \"service\" = 'broker-0'AND $timeFilter GROUP BY time(30s)",
        "alias" : "$col",
        "rawQuery" : true
      }, {
        "refId" : "C",
        "query" : "SELECT sum(\"95thPercentile\") as \"95thPercentile\" FROM \"LogFlushRateAndTimeMs\" WHERE \"group\" = 'kafka.log' AND \"service\" = 'broker-0'AND $timeFilter GROUP BY time(30s)",
        "alias" : "$col",
        "rawQuery" : true
      } ],
      "nullPointMode" : "connected",
      "x-axis" : true,
      "y-axis" : true,
      "y_formats" : [ "ms", "short" ],
      "lines" : true,
      "linewidth" : 1,
      "steppedLine" : false,
      "fill" : 0,
      "points" : true,
      "pointradius" : 1,
      "bars" : false,
      "percentage" : false,
      "stack" : false,
      "tooltip" : {
        "value_type" : "cumulative",
        "shared" : true
      },
      "seriesOverrides" : [ ],
      "aliasColors" : { },
      "legend" : {
        "show" : false,
        "values" : false,
        "min" : false,
        "max" : false,
        "current" : false,
        "total" : false,
        "avg" : false
      },
      "grid" : {
        "leftLogBase" : 2,
        "leftMax" : null,
        "rightMax" : null,
        "leftMin" : null,
        "rightMin" : null,
        "rightLogBase" : 1,
        "threshold1" : 100,
        "threshold1Color" : "rgba(236, 118, 21, 0.21)",
        "threshold2" : 250,
        "threshold2Color" : "rgba(234, 112, 112, 0.22)"
      }
    }, {
      "title" : "Throughput",
      "span" : 4,
      "id" : 13,
      "datasource" : "Kafka Metrics InfluxDB",
      "type" : "graph",
      "renderer" : "flot",
      "timeFrom" : null,
      "timeShift" : null,
      "editable" : true,
      "error" : false,
      "isNew" : true,
      "targets" : [ {
        "refId" : "A",
        "query" : "SELECT sum(\"OneMinuteRate\") * -1 FROM \"BytesOutPerSec\" WHERE \"topic\" =~ /^$topic$/ AND \"service\" = 'broker-0' AND $timeFilter GROUP BY time($interval) fill(null)",
        "alias" : "Output",
        "rawQuery" : true
      }, {
        "refId" : "B",
        "query" : "SELECT sum(\"OneMinuteRate\") FROM \"BytesInPerSec\" WHERE \"topic\" =~ /^$topic$/ AND \"service\" = 'broker-0' AND $timeFilter GROUP BY time($interval) fill(null)",
        "alias" : "Input",
        "rawQuery" : true
      } ],
      "nullPointMode" : "connected",
      "x-axis" : true,
      "y-axis" : false,
      "y_formats" : [ "bytes", "short" ],
      "lines" : true,
      "linewidth" : 1,
      "steppedLine" : false,
      "fill" : 6,
      "points" : false,
      "pointradius" : 2,
      "bars" : false,
      "percentage" : false,
      "stack" : false,
      "tooltip" : {
        "value_type" : "cumulative",
        "shared" : true
      },
      "seriesOverrides" : [ ],
      "aliasColors" : {
        "Input" : "#BF1B00",
        "Output" : "#508642"
      },
      "legend" : {
        "show" : true,
        "values" : false,
        "min" : false,
        "max" : false,
        "current" : false,
        "total" : false,
        "avg" : false
      },
      "grid" : {
        "leftLogBase" : 1,
        "leftMax" : null,
        "rightMax" : null,
        "leftMin" : null,
        "rightMin" : null,
        "rightLogBase" : 1,
        "threshold1" : null,
        "threshold1Color" : "rgba(216, 200, 27, 0.27)",
        "threshold2" : null,
        "threshold2Color" : "rgba(234, 112, 112, 0.22)"
      }
    } ]
  } ]
}
